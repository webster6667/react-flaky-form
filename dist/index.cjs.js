"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("react"),t=require("axios"),e=require("use-immer");function n(r){return r&&"object"==typeof r&&"default"in r?r:{default:r}}var o=n(r),i=n(t);function a(r){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function l(r,t,e,n,o,i,a){try{var l=r[i](a),u=l.value}catch(r){return void e(r)}l.done?t(u):Promise.resolve(u).then(n,o)}function u(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function c(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function s(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var n,o,i=[],a=!0,l=!1;try{for(e=e.call(r);!(a=(n=e.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(r){l=!0,o=r}finally{try{a||null==e.return||e.return()}finally{if(l)throw o}}return i}}(r,t)||function(r,t){if(r){if("string"==typeof r)return c(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(r,t):void 0}}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=Object.prototype,m=f.hasOwnProperty,p="function"==typeof Symbol?Symbol:{},h=p.iterator||"@@iterator",d=p.asyncIterator||"@@asyncIterator",v=p.toStringTag||"@@toStringTag";function y(r,t,e,n){var o=t&&t.prototype instanceof O?t:O,i=Object.create(o.prototype),a=new D(n||[]);return i._invoke=function(r,t,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return F()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var l=N(a,e);if(l){if(l===g)continue;return l}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=b(r,t,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===g)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(r,e,a),i}function b(r,t,e){try{return{type:"normal",arg:r.call(t,e)}}catch(r){return{type:"throw",arg:r}}}var g={};function O(){}function w(){}function E(){}var j={};j[h]=function(){return this};var S=Object.getPrototypeOf,P=S&&S(S(C([])));P&&P!==f&&m.call(P,h)&&(j=P);var L=E.prototype=O.prototype=Object.create(j);function x(r){["next","throw","return"].forEach((function(t){r[t]=function(r){return this._invoke(t,r)}}))}function V(r){var t="function"==typeof r&&r.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))}function k(r,t){function e(n,o,i,a){var l=b(r[n],r,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==typeof c&&m.call(c,"__await")?t.resolve(c.__await).then((function(r){e("next",r,i,a)}),(function(r){e("throw",r,i,a)})):t.resolve(c).then((function(r){u.value=r,i(u)}),(function(r){return e("throw",r,i,a)}))}a(l.arg)}var n;this._invoke=function(r,o){function i(){return new t((function(t,n){e(r,o,t,n)}))}return n=n?n.then(i,i):i()}}function N(r,t){var e=r.iterator[t.method];if(undefined===e){if(t.delegate=null,"throw"===t.method){if(r.iterator.return&&(t.method="return",t.arg=undefined,N(r,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var n=b(e,r.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,g;var o=n.arg;return o?o.done?(t[r.resultName]=o.value,t.next=r.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,g):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function A(r){var t={tryLoc:r[0]};1 in r&&(t.catchLoc=r[1]),2 in r&&(t.finallyLoc=r[2],t.afterLoc=r[3]),this.tryEntries.push(t)}function T(r){var t=r.completion||{};t.type="normal",delete t.arg,r.completion=t}function D(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(A,this),this.reset(!0)}function C(r){if(r){var t=r[h];if(t)return t.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var e=-1,n=function t(){for(;++e<r.length;)if(m.call(r,e))return t.value=r[e],t.done=!1,t;return t.value=undefined,t.done=!0,t};return n.next=n}}return{next:F}}function F(){return{value:undefined,done:!0}}w.prototype=L.constructor=E,E.constructor=w,E[v]=w.displayName="GeneratorFunction",x(k.prototype),k.prototype[d]=function(){return this},x(L),L[v]="Generator",L[h]=function(){return this},L.toString=function(){return"[object Generator]"},D.prototype={constructor:D,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(T),!r)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=undefined)},stop:function(){this.done=!0;var r=this.tryEntries[0].completion;if("throw"===r.type)throw r.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var t=this;function e(e,n){return i.type="throw",i.arg=r,t.next=e,n&&(t.method="next",t.arg=undefined),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),l=m.call(o,"finallyLoc");if(a&&l){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(r,t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&m.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===r||"continue"===r)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=r,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(r,t){if("throw"===r.type)throw r.arg;return"break"===r.type||"continue"===r.type?this.next=r.arg:"return"===r.type?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):"normal"===r.type&&t&&(this.next=t),g},finish:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===r)return this.complete(e.completion,e.afterLoc),T(e),g}},catch:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===r){var n=e.completion;if("throw"===n.type){var o=n.arg;T(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(r,t,e){return this.delegate={iterator:C(r),resultName:t,nextLoc:e},"next"===this.method&&(this.arg=undefined),g}};var I={wrap:y,isGeneratorFunction:V,AsyncIterator:k,mark:function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,E):(r.__proto__=E,v in r||(r[v]="GeneratorFunction")),r.prototype=Object.create(L),r},awrap:function(r){return{__await:r}},async:function(r,t,e,n,o){void 0===o&&(o=Promise);var i=new k(y(r,t,e,n),o);return V(t)?i:i.next().then((function(r){return r.done?r.value:i.next()}))},keys:function(r){var t=[];for(var e in r)t.push(e);return t.reverse(),function e(){for(;t.length;){var n=t.pop();if(n in r)return e.value=n,e.done=!1,e}return e.done=!0,e}},values:C};function _(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function W(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?_(Object(e),!0).forEach((function(t){u(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):_(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var R=global,B=R.activeForm?R.activeForm:{},q=B.formValidatorsSetting,M=void 0===q?{}:q,G=W(W({action:null,formName:"form"},B),{},{formValidatorsSetting:W({minLength:{liveEnable:!0,showLiveErrorAfterFirstSubmit:!1,shouldLockNotValidWrite:!1,showErrorTimeout:0,hideErrorTimeout:null},maxLength:{liveEnable:!0,showLiveErrorAfterFirstSubmit:!1,shouldLockNotValidWrite:!0,showErrorTimeout:0,hideErrorTimeout:null},minValue:{liveEnable:!0,showLiveErrorAfterFirstSubmit:!1,shouldLockNotValidWrite:!1,showErrorTimeout:0,hideErrorTimeout:null},maxValue:{liveEnable:!0,showLiveErrorAfterFirstSubmit:!1,shouldLockNotValidWrite:!1,showErrorTimeout:0,hideErrorTimeout:null},required:{liveEnable:!0,showLiveErrorAfterFirstSubmit:!1,shouldLockNotValidWrite:!1,showErrorTimeout:0,hideErrorTimeout:null},number:{liveEnable:!0,showLiveErrorAfterFirstSubmit:!1,shouldLockNotValidWrite:!0,showErrorTimeout:0,hideErrorTimeout:null},email:{liveEnable:!1,showLiveErrorAfterFirstSubmit:!1,shouldLockNotValidWrite:!1,showErrorTimeout:0,hideErrorTimeout:null}},M)});function z(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function $(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?z(Object(e),!0).forEach((function(t){u(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):z(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var Z=function(r,t){var e=r.validatorsSetting;Object.keys(t).forEach((function(r){var n=e[r],o=t[r],i="boolean"==typeof o;if("object"===a(o))e[r]=$($({},n),o);else{if(!i)throw new Error("invalid params type, need boolean or object");e[r]=$($({},n),{},{liveEnable:o})}}))},Y=function(r,t,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=!0;return Object.keys(t).forEach((function(a){var l=t[a];if(Array.isArray(l))l.forEach((function(t,l){var u={currentControl:t,controlName:a,controlIndex:l,formIndex:n,formName:e.formSettings.formName};!0!==r(u,e,o)&&(i=!1)}));else{var u={currentControl:l,controlName:a,controlIndex:null,formIndex:n,formName:e.formSettings.formName};!0!==r(u,e,o)&&(i=!1)}})),i},U=function(r,t,e){var n=r.controls,o=!0;Array.isArray(n)?n.forEach((function(n,i){!1===Y(t,n,r,i,e)&&(o=!1)})):!1===Y(t,n,r,null,e)&&(o=!1);return o},H=function(r){return null!==r},J=function(r){return null!==r};function K(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function Q(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?K(Object(e),!0).forEach((function(t){u(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):K(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var X=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=J(e)?r.controls[e]:r.controls,i=H(n)?o[t][n]:o[t];return i},rr=function(r,t){var e,n=function(r,t,e){for(;t<r.length;t++)"9"!==r[t]&&"A"!==r[t]&&"S"!==r[t]||(r[t]=e);return r},o="object"===a(t)?t.pattern:t,i=o.replace(/\W/g,""),l=o.split(""),u=r.toString().replace(/\W/g,""),c=u.replace(/\W/g,""),s=0,f=l.length,m="object"===a(t)?t.placeholder:void 0;for(e=0;e<f;e++){if(s>=u.length){if(i.length==c.length)return l.join("");if(void 0!==m&&i.length>c.length)return n(l,e,m).join("");break}if("9"===l[e]&&u[s].match(/[0-9]/)||"A"===l[e]&&u[s].match(/[a-zA-Z]/)||"S"===l[e]&&u[s].match(/[0-9a-zA-Z]/))l[e]=u[s++];else if("9"===l[e]||"A"===l[e]||"S"===l[e])return void 0!==m?n(l,e,m).join(""):l.slice(0,e).join("")}return l.join("").substr(0,e)},tr=function(r,t,e,n){var o=r.maskPattern,i=r.eventWhenPlaceholderVisible,a=r.maskPlaceholder,l=void 0===a?void 0:a,u=function(r,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=r.replace(/[9|A]/gi,"").split(""),o=r.replace(/[9|A]/gi,"⌀"),i=String(t),a=i.split(""),l=1===i.length,u="";return l?i:(a.map((function(r,t){var e=r===o[t],i=n.includes(r),a=!e;if(e&&i){var l=n.indexOf(r);n.splice(l,1)}else a&&(u+=r)})),u=u.replace(new RegExp(e,"g"),""))}(o,e,l),c="write"!==i,s="write"===i;c&&!l&&(l="_"),s&&(l=void 0),!t.maskSetting._maskWithPlaceholder&&(t.maskSetting._maskWithPlaceholder=rr("",{pattern:o,placeholder:l||"_"})),t.maskSetting.clearValue=u;var f=rr(u,{pattern:o,placeholder:l}),m=!1,p=t.maskSetting._maskWithPlaceholder,h=f===p,d=f.includes(l);(c&&["mouseleave","blur"].includes(n)&&h&&(f=""),s)?f.length!==p.length&&(m=!0):d&&(m=!0);t.hasError=m,t.value=f};var er={exports:{}};!function(r){function t(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(r.exports=t=function(r){return typeof r},r.exports.default=r.exports,r.exports.__esModule=!0):(r.exports=t=function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},r.exports.default=r.exports,r.exports.__esModule=!0),t(e)}r.exports=t,r.exports.default=r.exports,r.exports.__esModule=!0}(er);var nr=function(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}(er.exports),or=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.limit,n=void 0===e?null:e,o="string"==typeof n?Number(n):n,i=!Array.isArray(r)&&!["string","number"].includes(nr(r)),a="number"!=typeof o&&null!==o||null!==o&&isNaN(o),l=Array.isArray(r)?r.length:String(r).length,u="number"==typeof o&&l<o;if(a)throw new TypeError("limit value must be only number or number in string like '1'");if(i)throw new TypeError("written value must be only string, number or array");return u},ir=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.limit,n=void 0===e?null:e,o="string"==typeof n?Number(n):n,i=!Array.isArray(r)&&!["string","number"].includes(nr(r)),a="number"!=typeof o&&null!==o||null!==o&&isNaN(o),l=Array.isArray(r)?r.length:String(r).length,u="number"==typeof o&&l>o;if(a)throw new TypeError("limit value must be only number or number in string like '1'");if(i)throw new TypeError("written value must be only string, number or array");return u},ar=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.limit,n=void 0===e?null:e,o="string"==typeof n?Number(n):n,i=isNaN(Number(r))||null===r,a="number"!=typeof o&&null!==o||null!==o&&isNaN(o),l="number"==typeof o&&Number(r)>o;if(a)throw new TypeError("limit value must be only number or number in string like '1'");if(i)throw new TypeError("written value can be only number");return l},lr=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.limit,n=void 0===e?null:e,o="string"==typeof n?Number(n):n,i=isNaN(Number(r))||null===r,a="number"!=typeof o&&null!==o||null!==o&&isNaN(o),l="number"==typeof o&&Number(r)<o;if(a)throw new TypeError("limit value must be only number or number in string like '1'");if(i)throw new TypeError("written value can be only number");return l},ur=function(r){var t=!Array.isArray(r)&&!["string","number"].includes(nr(r)),e=0===(Array.isArray(r)?r.length:String(r).length);if(t)throw new TypeError("written value can be only string or number");return e},cr=function(r){var t=!["string","number"].includes(nr(r)),e=!/.+@.+\..+/i.test(String(r));if(t)throw new TypeError("written value can be only string or number");return e},sr=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=!["string","number"].includes(nr(r))||null===r;r=String(r);var n=t||{},o=n.shouldLockNegativeNumber,i=void 0!==o&&o,a=n.shouldLockFloatNumber,l=void 0!==a&&a,u=n.allowableSymbols,c=void 0===u?[]:u,s=n.customRegExp,f=void 0===s?null:s,m=n.isLiveValidator,p=void 0!==m&&m,h=c.includes("-")?c.join("").replace(/-/g,"\\-"):c.join(""),d="".concat(h,"1-9"),v=new RegExp("^[-]?([".concat(d,"]+)?[.]?([").concat(d,"]+)?$")),y=p?["-.",".",".-"]:["-.",".",".-","-"],b=y.includes(r),g=!0;if(r){var O=v;i&&(O=l?new RegExp("^[".concat(d,"]+$")):new RegExp("^([".concat(d,"]+)?[.]?([").concat(d,"]+)?$"))),l&&(O=i?new RegExp("^[".concat(d,"]+$")):new RegExp("^[-]?([".concat(d,"]+)?$"))),g=O.test(r),b&&(g=!1),f&&(g=f.test(r))}if(e)throw new TypeError("written value can be only number or string");return g},fr=function(r,t){Object.keys(r).forEach((function(e){var n=t[e];n&&(r[e]=n)}))},mr=function(r){return!0===r.liveEnable};function pr(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function hr(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(e),!0).forEach((function(t){u(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):pr(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var dr=function(r){var t=r.currentControl,e=r.newValue,n=t.validateRules||{},o=t.validatorsSetting||{},i=n.minValue,a=n.maxValue,l=n.minLength,u=n.maxLength,c=n.required,s=n.number,f=n.email,m=o.minValue,p=o.maxValue,h=o.minLength,d=o.maxLength,v=o.required,y=o.number,b=o.email,g={hasError:!1,shouldLockNotValidWrite:!1,message:null,limit:null,showLiveErrorAfterFirstSubmit:!1,hideErrorTimeout:null,showErrorTimeout:null};if("string"==typeof e||"number"==typeof e){var O=sr(e,s),w=!O,E=!0;!ur(e)&&(O&&lr(e,i)&&mr(m)&&fr(g,hr(hr(hr({},i),m),{},{hasError:E})),O&&ar(e,a)&&mr(p)&&fr(g,hr(hr(hr({},a),p),{},{hasError:E})),or(e,l)&&mr(h)&&fr(g,hr(hr(hr({},l),h),{},{hasError:E})),ir(e,u)&&mr(d)&&fr(g,hr(hr(hr({},u),d),{},{hasError:E})),f&&cr(e)&&mr(b)&&fr(g,hr(hr(hr({},f),b),{},{hasError:E}))),c&&ur(e)&&mr(v)&&fr(g,hr(hr(hr({},c),v),{},{hasError:E})),s&&w&&fr(g,hr(hr(hr({},s),y),{},{hasError:E}))}return{errorData:g}};function vr(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function yr(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(e),!0).forEach((function(t){u(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):vr(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var br=function(r){var t=r.currentControl,e=r.newValue,n=t.validatorsSetting||{},o=t.validateRules||{},i=o.required,a=o.minValue,l=o.maxValue,u=o.minLength,c=o.maxLength,s=n.required,f=n.minValue,m=n.maxValue,p=n.minLength,h=n.maxLength,d={hasError:!1,shouldLockNotValidWrite:!1,message:null,limit:null,showLiveErrorAfterFirstSubmit:null,hideErrorTimeout:null,showErrorTimeout:null},v=Array.isArray(e)?function(r){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.reduce((function(r,e){return t&&isNaN(+e)?+r:+r+ +e}),0)}(e):null,y=!isNaN(v),b=!0;return i&&ur(e)&&mr(s)&&fr(d,yr(yr(yr({},i),s),{},{hasError:b})),a&&y&&lr(v,a)&&mr(f)&&fr(d,yr(yr(yr({},a),f),{},{hasError:b})),l&&y&&ar(v,l)&&mr(m)&&fr(d,yr(yr(yr({},l),m),{},{hasError:b})),u&&or(e,u)&&mr(p)&&fr(d,yr(yr(yr({},u),p),{},{hasError:b})),c&&ir(e,c)&&mr(h)&&fr(d,yr(yr(yr({},c),h),{},{hasError:b})),{errorData:d}};function gr(r,t){var e;return function(){for(var n=this,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var l=function(){r.apply(n,i)};return clearTimeout(e),e=setTimeout(l,t)}}var Or=function(r,t){r((function(r){var e=t.controlName,n=t.formIndex,o=t.controlIndex;X(r,e,n,o).hasError=!1}))};function wr(r,t){if(r=+r,2===t.length&&t.push(t[1]),isNaN(r))throw new Error("type of quantity expect only number");return t[r%100>4&&r%100<20?2:[2,0,1,1,1,2][r%10<5?r%10:5]]}var Er=function(r,t){var e=t.limit;return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,e=!("string"==typeof r||"number"==typeof r||null===r);if(null===r)return"";if(e)throw new Error("message for replace has invalid type");var n=r;return n&&t.forEach((function(t){var e=t.searchLayout,o=t.valueToReplace,i=t.shouldClearSearchLayoutIfReplaceValueIsArray,a=void 0===i||i;if(null===o)return"";var l=new RegExp("".concat(e,"['[a-zA-Zа-яА-я]+', '[a-zA-Zа-яА-я]+'(, '[a-zA-Zа-яА-я]+')?]"),"g");if(l.test(n))n=n.replace(l,(function(r){var t=r.replace(new RegExp(e),"").replace(/[\[\]'"]/g,"").split(", "),n=isNaN(+o)?null:wr(+o,t);return isNaN(+o)?o.toString():"".concat(o," ").concat(n)}));else{var u=a?"":o.toString(),c=Array.isArray(o)?u:String(o),s=""===c&&new RegExp(e+" ","g").test(r)?e+" ":e;n=n.replace(new RegExp(s,"g"),c)}})),n}(r,[{searchLayout:"{limit}",valueToReplace:e},{searchLayout:"limitForDecline",valueToReplace:e},{searchLayout:"{label}",valueToReplace:t.controlLabel},{searchLayout:"{writeValue}",valueToReplace:t.writeToControlValue}])},jr=function(r,t,e){e((function(n){var o=t.controlName,i=t.formIndex,a=t.controlIndex,l=t.newValue,u=X(n,o,i,a),c=u.label,s=r||{},f=s.message,m=void 0===f?null:f,p=s.limit,h=void 0===p?null:p,d=s.hideErrorTimeout,v=void 0===d?null:d,y=u.beforeLiveValidatorError||n.formSettings.beforeLiveValidatorError||null,b=u.afterLiveValidatorError||n.formSettings.afterLiveValidatorError||null;if("function"==typeof y&&y(t),r&&(u.error=Er(m,{limit:h,controlLabel:c,writeToControlValue:l})),u.hasError=!0,v){var g=function(r,t,e){return gr(Or,e)(t,r)}(t,e,v);u._hideErrorTimeoutId=g}"function"==typeof b&&b(t)}))},Sr=function(r,t,e,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=jr,l=gr(a,i),u=r.hasError,c=i,s=null;return c?u?(clearTimeout(o),s=l(r,t,n)):o&&clearTimeout(o):u&&a(r,t,n),s},Pr=function(r,t,e){var n=r(t),o=n.errorData,i=void 0===o?null:o,a=n.modifiedValueToWrite,l=void 0===a?null:a,u=i.shouldLockNotValidWrite,c=i.hasError;u&&(e.isWriteInputEnable=!1),c&&(e.hasAnyError=!0),l&&(e.writeToControlValue=l),i&&(e.errorDataForControl=i)},Lr=function(r,t,e,n,o){var i=r.type,a=r._hideErrorTimeoutId,l=void 0===a?null:a,u=r._showErrorTimeoutId,c=["phone","number","text","password","date"].includes(i)?dr:br,s=r.customLiveValidator||t.formSettings.customLiveValidator||c,f=r.additionalLiveValidator||t.formSettings.additionalLiveValidator||null,m=r.maskSetting||null,p=r.customMask,h=e.newValue,d=t.formParams.isFormTriedSubmit,v=m,y="function"==typeof s,b="function"==typeof f,g={writeToControlValue:h,errorDataForControl:null,hasAnyError:!1,isWriteInputEnable:!0};if("function"==typeof p)p(rr,e);else if(v&&!Array.isArray(h))tr(m,r,h,n);else{y&&Pr(s,e,g),b&&Pr(f,e,g);var O=g.errorDataForControl,w=g.hasAnyError,E=g.writeToControlValue,j=g.isWriteInputEnable,S=O||{},P=S.showLiveErrorAfterFirstSubmit,L=void 0!==P&&P,x=S.showErrorTimeout,V=void 0===x?0:x,k=!L;j&&(r.value=E),w||(r.hasError=!1,l&&clearTimeout(r._hideErrorTimeoutId)),(L&&d||k)&&(r._showErrorTimeoutId=Sr(O,e,t,o,u,V))}};function xr(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function Vr(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(e),!0).forEach((function(t){u(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):xr(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var kr=function(r,t){var e=t.shouldLockSubmitBtnWhenControlInvalid,n=void 0!==e&&e,o=!!r.shouldLockSubmitBtn||n;fr(r,Vr(Vr({},t),{},{hasError:!0,shouldLockSubmitBtn:o}))};function Nr(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function Ar(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(e),!0).forEach((function(t){u(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Nr(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var Tr=function(r){var t=r.currentControl,e=t.value,n=t.validateRules||{},o=t.validatorsSetting||{},i=n.minValue,a=n.maxValue,l=n.minLength,u=n.maxLength,c=n.required,s=n.number,f=n.email,m=o.minValue,p=o.maxValue,h=o.minLength,d=o.maxLength,v=o.required,y=o.number,b=o.email,g={hasError:!1,shouldLockNotValidWrite:!1,message:null,limit:null,showLiveErrorAfterFirstSubmit:!1,hideErrorTimeout:null,shouldLockSubmitBtnWhenControlInvalid:!1,shouldLockSubmitBtn:!1};if("string"==typeof e||"number"==typeof e){var O=sr(e,s),w=!O;!ur(e)&&(O&&lr(e,i)&&kr(g,Ar(Ar({},i),m)),O&&ar(e,a)&&kr(g,Ar(Ar({},a),p)),or(e,l)&&kr(g,Ar(Ar({},l),h)),ir(e,u)&&kr(g,Ar(Ar({},u),d)),f&&cr(e)&&kr(g,Ar(Ar({},f),b))),c&&ur(e)&&kr(g,Ar(Ar({},c),v)),s&&w&&kr(g,Ar(Ar({},s),y))}return g},Dr=function(r,t,e){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=r(t),i=o.hasError,a=void 0!==i&&i,l=o.shouldLockSubmitBtn,u=void 0!==l&&l;a&&(n&&u||!0!==n)&&(e.shouldLockSubmitBtn=!0)};function Cr(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function Fr(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(e),!0).forEach((function(t){u(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Cr(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var Ir=function(r,t){var e=r.currentControl,n=Fr(Fr({},r),{},{newValue:e.value,selectedValue:null,form:t}),o=e.customLockSubmitBtnValidator||t.formSettings.customLockSubmitBtnValidator||Tr,i=e.additionalLockSubmitBtnValidator||t.formSettings.additionalLockSubmitBtnValidator||null,a="function"==typeof i,l={shouldLockSubmitBtn:!1};return"function"==typeof o&&Dr(o,n,l,!0),a&&Dr(i,n,l),l.shouldLockSubmitBtn},_r=function(r){return U(r,Ir)},Wr=function(r,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6?arguments[6]:void 0;o((function(l){var u=X(l,t,n,e),c={currentControl:u,controlIndex:e,formIndex:n,controlName:t,newValue:r,form:l,selectedValue:a},s=u.beforeChange||l.formSettings.beforeChange||null,f=u.afterChange||l.formSettings.afterChange||null;"function"==typeof s&&s(c),Lr(u,l,c,i,o),"function"==typeof f&&f(c),l.formParams.isSubmitBtnLocked=_r(l)}))},Rr=function(r,t,e){var n=r.currentControl,o=r.controlName,i=n.type,a=void 0===i?null:i,l=t.controlsExample;return a?(!function(r){var t=r.currentControl,e=r.controlName,n=r.formName,o="select"===t.type;if(t.error="",t.hasError=!1,t.controlName=e,t.inputName="".concat(n,"[").concat(e,"]"),t.value||(t.value=""),o){t.isMultiple=!0===t.isMultiple;var i=t.options,a=t.value,l=t.selectPlaceholder,u=Array.isArray(a)?a.length>0:Boolean(a);i.length&&!l&&!1===t.isMultiple&&!u&&(t.value=i[0].value)}}(r),function(r,t){var e=r.validatorsSetting||{},n=t.formSettings.formValidatorsSetting||{};r.validatorsSetting=t.formSettings.formValidatorsSetting,Z(r,n),Z(r,e)}(n,t),n.setValue=function(r,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Wr(r,o,t,n,e,i,a)},function(r,t){var e=t.controlIndex,n=t.controlName,o=t.currentControl;H(e)&&(r[n]=[Q({},o)]),function(r){return null===r}(e)&&(r[n]=Q({},o))}(l,r),t.formParams.isSubmitBtnLocked=Ir(r,t)):console.error("type is require control prop"),!0};function Br(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function qr(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(e),!0).forEach((function(t){u(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Br(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var Mr=function(r,t){var e=t.currentControl,n=t.form,o=e.label,i=e.value,a=r||{},l=a.message,c=void 0===l?null:l,s=a.limit,f=void 0===s?null:s,m=e.beforeSubmitValidatorError||n.formSettings.beforeSubmitValidatorError||null,p=e.afterSubmitValidatorError||n.formSettings.afterSubmitValidatorError||null;if("function"==typeof m&&m(t),r){var h=Er(c,{limit:f,controlLabel:o,writeToControlValue:i});e.error=h,function(r,t,e){var n=e.formIndex,o=void 0===n?null:n,i=e.controlName,a=null!==o,l=u({},i,r);if(a){var c=t.formParams.errorList[o];t.formParams.errorList[o]=qr(qr({},c),l)}else Array.isArray(t.formParams.errorList)&&i&&t.formParams.errorList.push(l)}(h,n,t),e.hasError=!0}"function"==typeof p&&p(t)},Gr=function(r,t,e){var n=r(t).errorData,o=void 0===n?null:n;o.hasError&&(e.isControlBeforeSubmitValidationSuccess=!1,e.hasControlError=!0),o&&(e.errorDataForControl=o)};function zr(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function $r(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(e),!0).forEach((function(t){u(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):zr(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var Zr=function(r,t){var e=r.currentControl,n=$r($r({},r),{},{newValue:e.value,selectedValue:null,form:t}),o=e.customSubmitValidator||t.formSettings.customSubmitValidator||Tr,i=e.additionalSubmitValidator||t.formSettings.additionalSubmitValidator||null,a=e.beforeSubmitValidator||t.formSettings.beforeSubmitValidator||null,l=e.afterSubmitValidator||t.formSettings.afterSubmitValidator||null,u="function"==typeof o,c="function"==typeof i,s={isControlBeforeSubmitValidationSuccess:!0,errorDataForControl:null,hasControlError:!1};"function"==typeof a&&a(n),u&&Gr(o,n,s),c&&Gr(i,n,s);var f=s.isControlBeforeSubmitValidationSuccess;return s.hasControlError&&Mr(s.errorDataForControl,n),"function"==typeof l&&l(n),f},Yr=function(r,t,e,n,o){U(r,Rr,o)},Ur=function(r){r.formParams.isSubmitBtnLocked=_r(r)},Hr=function(r,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=[];return Array.isArray(r)?null!==e&&(n=r[e][t]):n=r[t],n};function Jr(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function Kr(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(e),!0).forEach((function(t){u(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Jr(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}function Qr(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function Xr(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(e),!0).forEach((function(t){u(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Qr(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}exports.AddControlExample=function(r){var t=r.setForm,e=r.controlName,n=r.formIndex,i=void 0===n?null:n;return o.default.createElement("div",{className:"add-form-clone",onClick:function(r){return function(r,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r((function(r){var n=r.controls,o=Hr(n,t,e),i=Kr({},r.controlsExample[t][0]);o.push(i),Ur(r)}))}(t,e,i)}},"+ c")},exports.AddFormExample=function(r){var t=r.setForm,e=r.value,n=void 0===e?"Добавить форму":e,i=r.children;return o.default.createElement("div",{className:"add-form-clone",onClick:function(r){return function(r){r((function(r){if(Array.isArray(r.controls)){var t=Kr({},r.controlsExample);r.controls.push(t),Ur(r)}}))}(t)}},n||i)},exports.FlukyForm=function(r){var t=r.children,e=r.className,n=void 0===e?"form":e;r.id,r.action;var l=r.formState,u=r.setForm;l.formParams.loaded;var c=l.formSettings.formName;return o.default.createElement("form",{id:String(c),className:n,onSubmit:function(r){r.preventDefault(),function(r){r((function(r){if(r.formParams.errorList=[],r.formParams.isFormTriedSubmit=!0,U(r,Zr)){var t=r.formSettings,e=t.action,n=void 0===e?null:e,o=t.afterSuccessSubmit,l=void 0===o?null:o,u=t.afterErrorSubmit,c=void 0===u?null:u,s=t.afterSubmit,f=void 0===s?null:s,m=n?"object"===a(n)&&n.toSubmit?n.toSubmit:String(n):null;m&&i.default.post(m).then((function(r){var t=r.status;200===t&&"function"==typeof l&&l(r),500===t&&"function"==typeof c&&c(r),"function"==typeof f&&f(r)})).catch((function(r){500===r.status&&"function"==typeof c&&c(r),"function"==typeof f&&f(r)}))}}))}(u)}},t,o.default.createElement("input",{"data-element":"hidden-submit-trigger",type:"submit",style:{opacity:0,width:0,height:0,position:"absolute",zIndex:-1}}))},exports.RemoveControl=function(r){var t=r.setForm,e=r.controlName,n=r.controlIndex,i=r.formIndex,a=void 0===i?null:i;return o.default.createElement("div",{className:"remove-control",onClick:function(r){return function(r,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;null!==n&&t&&r((function(r){var o=r.controls;Hr(o,t,e).splice(n,1),Ur(r)}))}(t,e,a,n)}},"- c")},exports.RemoveForm=function(r){var t=r.setForm,e=r.formIndex,n=r.value,i=r.children;return o.default.createElement("div",{className:"remove-form-clone",onClick:function(r){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;null!=r&&t((function(t){Array.isArray(t.controls)&&(t.controls.splice(r,1),Ur(t))}))}(e,t)}},n||i)},exports.useFlukyForm=function(t,n){var o,u,c,f={loaded:!1,isFormTriedSubmit:!1,isSubmitBtnLocked:!1,errorList:[],commonError:""},m=(o=G.formValidatorsSetting,u=n.formValidatorsSetting,c=$({},o),Object.keys(c).forEach((function(r){var t=o[r],e=u?u[r]:{};c[r]=$($({},t),e)})),c),p=s(e.useImmer({controls:t,formParams:f,formSettings:Xr(Xr(Xr({},G),{},{formName:"form"},n),{},{formValidatorsSetting:m}),controlsExample:{}}),2),h=p[0],d=p[1];return r.useEffect((function(){var r,t;(r=I.mark((function r(){var t,e,o;return I.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=n.action,!(o=(e=void 0===t?null:t)?"object"===a(e)&&e.toInit?e.toInit:String(e):null)){r.next=9;break}return r.next=6,i.default.post(o);case 6:r.t0=r.sent,r.next=10;break;case 9:r.t0=null;case 10:r.t0,d((function(r){Yr(r,0,0,0,d)}));case 12:case"end":return r.stop()}}),r)})),t=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(r){l(i,n,o,a,u,"next",r)}function u(r){l(i,n,o,a,u,"throw",r)}a(void 0)}))},function(){return t.apply(this,arguments)})()}),[]),[h,d]};

import{useState as r,useEffect as t}from"react";import e from"axios";function n(r,t,e,n,o,i,a){try{var u=r[i](a),l=u.value}catch(r){return void e(r)}u.done?t(l):Promise.resolve(l).then(n,o)}function o(r){return function(){var t=this,e=arguments;return new Promise((function(o,i){var a=r.apply(t,e);function u(r){n(a,o,i,u,l,"next",r)}function l(r){n(a,o,i,u,l,"throw",r)}u(void 0)}))}}function i(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function a(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function u(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var n,o,i=[],a=!0,u=!1;try{for(e=e.call(r);!(a=(n=e.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(r){u=!0,o=r}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}}(r,t)||function(r,t){if(r){if("string"==typeof r)return a(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(r,t):void 0}}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=Object.prototype,c=l.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},f=s.iterator||"@@iterator",h=s.asyncIterator||"@@asyncIterator",p=s.toStringTag||"@@toStringTag";function m(r,t,e,n){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),a=new x(n||[]);return i._invoke=function(r,t,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return D()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var u=k(a,e);if(u){if(u===y)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var l=v(r,t,e);if("normal"===l.type){if(n=e.done?"completed":"suspendedYield",l.arg===y)continue;return{value:l.arg,done:e.done}}"throw"===l.type&&(n="completed",e.method="throw",e.arg=l.arg)}}}(r,e,a),i}function v(r,t,e){try{return{type:"normal",arg:r.call(t,e)}}catch(r){return{type:"throw",arg:r}}}var y={};function b(){}function d(){}function g(){}var w={};w[f]=function(){return this};var O=Object.getPrototypeOf,E=O&&O(O(A([])));E&&E!==l&&c.call(E,f)&&(w=E);var j=g.prototype=b.prototype=Object.create(w);function S(r){["next","throw","return"].forEach((function(t){r[t]=function(r){return this._invoke(t,r)}}))}function L(r){var t="function"==typeof r&&r.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))}function P(r,t){function e(n,o,i,a){var u=v(r[n],r,o);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==typeof s&&c.call(s,"__await")?t.resolve(s.__await).then((function(r){e("next",r,i,a)}),(function(r){e("throw",r,i,a)})):t.resolve(s).then((function(r){l.value=r,i(l)}),(function(r){return e("throw",r,i,a)}))}a(u.arg)}var n;this._invoke=function(r,o){function i(){return new t((function(t,n){e(r,o,t,n)}))}return n=n?n.then(i,i):i()}}function k(r,t){var e=r.iterator[t.method];if(undefined===e){if(t.delegate=null,"throw"===t.method){if(r.iterator.return&&(t.method="return",t.arg=undefined,k(r,t),"throw"===t.method))return y;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var n=v(e,r.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,y;var o=n.arg;return o?o.done?(t[r.resultName]=o.value,t.next=r.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,y):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function N(r){var t={tryLoc:r[0]};1 in r&&(t.catchLoc=r[1]),2 in r&&(t.finallyLoc=r[2],t.afterLoc=r[3]),this.tryEntries.push(t)}function T(r){var t=r.completion||{};t.type="normal",delete t.arg,r.completion=t}function x(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(N,this),this.reset(!0)}function A(r){if(r){var t=r[f];if(t)return t.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var e=-1,n=function t(){for(;++e<r.length;)if(c.call(r,e))return t.value=r[e],t.done=!1,t;return t.value=undefined,t.done=!0,t};return n.next=n}}return{next:D}}function D(){return{value:undefined,done:!0}}d.prototype=j.constructor=g,g.constructor=d,g[p]=d.displayName="GeneratorFunction",S(P.prototype),P.prototype[h]=function(){return this},S(j),j[p]="Generator",j[f]=function(){return this},j.toString=function(){return"[object Generator]"},x.prototype={constructor:x,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(T),!r)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=undefined)},stop:function(){this.done=!0;var r=this.tryEntries[0].completion;if("throw"===r.type)throw r.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var t=this;function e(e,n){return i.type="throw",i.arg=r,t.next=e,n&&(t.method="next",t.arg=undefined),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=c.call(o,"catchLoc"),u=c.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(r,t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&c.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===r||"continue"===r)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=r,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(r,t){if("throw"===r.type)throw r.arg;return"break"===r.type||"continue"===r.type?this.next=r.arg:"return"===r.type?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):"normal"===r.type&&t&&(this.next=t),y},finish:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===r)return this.complete(e.completion,e.afterLoc),T(e),y}},catch:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===r){var n=e.completion;if("throw"===n.type){var o=n.arg;T(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(r,t,e){return this.delegate={iterator:A(r),resultName:t,nextLoc:e},"next"===this.method&&(this.arg=undefined),y}};var V={wrap:m,isGeneratorFunction:L,AsyncIterator:P,mark:function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,g):(r.__proto__=g,p in r||(r[p]="GeneratorFunction")),r.prototype=Object.create(j),r},awrap:function(r){return{__await:r}},async:function(r,t,e,n,o){void 0===o&&(o=Promise);var i=new P(m(r,t,e,n),o);return L(t)?i:i.next().then((function(r){return r.done?r.value:i.next()}))},keys:function(r){var t=[];for(var e in r)t.push(e);return t.reverse(),function e(){for(;t.length;){var n=t.pop();if(n in r)return e.value=n,e.done=!1,e}return e.done=!0,e}},values:A},B={formName:"form",formValidatorsRules:{minLength:{limit:0,liveEnable:!0,showLiveErrorAfterFirstSubmit:!1,shouldLockNotValidWrite:!1,showErrorTimeout:0,hideErrorTimeout:null},maxLength:{limit:100,liveEnable:!0,showLiveErrorAfterFirstSubmit:!1,shouldLockNotValidWrite:!0,showErrorTimeout:0,hideErrorTimeout:null},minValue:{limit:0,liveEnable:!0,showLiveErrorAfterFirstSubmit:!1,shouldLockNotValidWrite:!1,showErrorTimeout:0,hideErrorTimeout:null},maxValue:{limit:1e3,liveEnable:!0,showLiveErrorAfterFirstSubmit:!1,shouldLockNotValidWrite:!1,showErrorTimeout:0,hideErrorTimeout:null},required:{liveEnable:!0,showLiveErrorAfterFirstSubmit:!1,shouldLockNotValidWrite:!1,showErrorTimeout:0,hideErrorTimeout:null},number:{liveEnable:!0,showLiveErrorAfterFirstSubmit:!1,shouldLockNotValidWrite:!0,showErrorTimeout:0,hideErrorTimeout:null},email:{liveEnable:!1,showLiveErrorAfterFirstSubmit:!1,shouldLockNotValidWrite:!1,showErrorTimeout:0,hideErrorTimeout:null}}};function C(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function I(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?C(Object(e),!0).forEach((function(t){i(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):C(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var _=function(r,t){var e=I({},r);return Object.keys(e).forEach((function(n){var o=r[n],i=t?t[n]:{};e[n]=I(I({},o),i)})),e};var R={exports:{}};!function(r){function t(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(r.exports=t=function(r){return typeof r},r.exports.default=r.exports,r.exports.__esModule=!0):(r.exports=t=function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},r.exports.default=r.exports,r.exports.__esModule=!0),t(e)}r.exports=t,r.exports.default=r.exports,r.exports.__esModule=!0}(R);var W=function(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}(R.exports),F=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.limit,n=void 0===e?null:e,o="string"==typeof n?Number(n):n,i=!Array.isArray(r)&&!["string","number"].includes(W(r)),a="number"!=typeof o&&null!==o||null!==o&&isNaN(o),u=Array.isArray(r)?r.length:String(r).length,l="number"==typeof o&&u<o;if(a)throw new TypeError("limit value must be only number or number in string like '1'");if(i)throw new TypeError("written value must be only string, number or array");return l},q=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.limit,n=void 0===e?null:e,o="string"==typeof n?Number(n):n,i=!Array.isArray(r)&&!["string","number"].includes(W(r)),a="number"!=typeof o&&null!==o||null!==o&&isNaN(o),u=Array.isArray(r)?r.length:String(r).length,l="number"==typeof o&&u>o;if(a)throw new TypeError("limit value must be only number or number in string like '1'");if(i)throw new TypeError("written value must be only string, number or array");return l},G=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.limit,n=void 0===e?null:e,o="string"==typeof n?Number(n):n,i=isNaN(Number(r))||null===r,a="number"!=typeof o&&null!==o||null!==o&&isNaN(o),u="number"==typeof o&&Number(r)>o;if(a)throw new TypeError("limit value must be only number or number in string like '1'");if(i)throw new TypeError("written value can be only number");return u},$=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.limit,n=void 0===e?null:e,o="string"==typeof n?Number(n):n,i=isNaN(Number(r))||null===r,a="number"!=typeof o&&null!==o||null!==o&&isNaN(o),u="number"==typeof o&&Number(r)<o;if(a)throw new TypeError("limit value must be only number or number in string like '1'");if(i)throw new TypeError("written value can be only number");return u},M=function(r){var t=!Array.isArray(r)&&!["string","number"].includes(W(r)),e=0===(Array.isArray(r)?r.length:String(r).length);if(t)throw new TypeError("written value can be only string or number");return e},z=function(r,t){Object.keys(r).forEach((function(e){var n=t[e];n&&(r[e]=n)}))},Z=function(r){return!0===r.liveEnable};function Y(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function U(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(e),!0).forEach((function(t){i(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Y(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var H=function(r){var t=r.currentControl,e=r.newValue,n=t.validateRules||{},o=n.minValue,i=n.maxValue,a=n.minLength,u=n.maxLength,l=n.required,c=n.number,s=n.email,f={hasError:!1,hasErrorLockingSubmitBtn:!1,shouldLockNotValidWrite:!1,message:null,limit:null,showLiveErrorAfterFirstSubmit:!1,hideErrorTimeout:null,showErrorTimeout:null};if("string"==typeof e||"number"==typeof e){var h=c||{},p=h.dot,m=void 0!==p&&p,v=h.negative,y=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=!["string","number"].includes(W(r))||null===r;r=String(r);var n=t||{},o=n.shouldLockNegativeNumber,i=void 0!==o&&o,a=n.shouldLockFloatNumber,u=void 0!==a&&a,l=n.allowableSymbols,c=void 0===l?[]:l,s=n.customRegExp,f=void 0===s?null:s,h=n.isLiveValidator,p=void 0!==h&&h,m=c.includes("-")?c.join("").replace(/-/g,"\\-"):c.join(""),v="".concat(m,"1-9"),y=new RegExp("^[-]?([".concat(v,"]+)?[.]?([").concat(v,"]+)?$")),b=(p?["-.",".",".-"]:["-.",".",".-","-"]).includes(r),d=!0;if(r){var g=y;i&&(g=u?new RegExp("^[".concat(v,"]+$")):new RegExp("^([".concat(v,"]+)?[.]?([").concat(v,"]+)?$"))),u&&(g=i?new RegExp("^[".concat(v,"]+$")):new RegExp("^[-]?([".concat(v,"]+)?$"))),d=g.test(r),b&&(d=!1),f&&(d=f.test(r))}if(e)throw new TypeError("written value can be only number or string");return d}(e,{shouldLockFloatNumber:!m,shouldLockNegativeNumber:!(void 0!==v&&v)}),b=!y,d=!0;if(!M(e)){if(y&&$(e,o)&&Z(o)){var g=o.shouldLockSubmitBtnWhenControlInvalid;z(f,U(U({},o),{},{hasErrorLockingSubmitBtn:g,hasError:d}))}if(y&&G(e,i)&&Z(i)){var w=i.shouldLockSubmitBtnWhenControlInvalid;z(f,U(U({},i),{},{hasErrorLockingSubmitBtn:w,hasError:d}))}if(F(e,a)&&Z(a)){var O=a.shouldLockSubmitBtnWhenControlInvalid;z(f,U(U({},a),{},{hasErrorLockingSubmitBtn:O,hasError:d}))}if(q(e,u)&&Z(u)){var E=u.shouldLockSubmitBtnWhenControlInvalid;z(f,U(U({},u),{},{hasErrorLockingSubmitBtn:E,hasError:d}))}if(s&&function(r){var t=!["string","number"].includes(W(r)),e=!/.+@.+\..+/i.test(String(r));if(t)throw new TypeError("written value can be only string or number");return e}(e)&&Z(s)){var j=s.shouldLockSubmitBtnWhenControlInvalid;z(f,U(U({},s),{},{hasErrorLockingSubmitBtn:j,hasError:d}))}}if(l&&M(e)&&Z(l)){var S=l.shouldLockSubmitBtnWhenControlInvalid;z(f,U(U({},l),{},{hasErrorLockingSubmitBtn:S,hasError:d}))}if(c&&b){var L=c.shouldLockSubmitBtnWhenControlInvalid;z(f,U(U({},c),{},{hasErrorLockingSubmitBtn:L,hasError:d}))}}return{errorData:f}};function J(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function K(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?J(Object(e),!0).forEach((function(t){i(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):J(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var Q=function(r){var t=r.currentControl,e=r.newValue,n=t.validateRules||{},o=n.required,i=n.minValue,a=n.maxValue,u=n.minLength,l=n.maxLength,c={hasError:!1,hasErrorLockingSubmitBtn:!1,shouldLockNotValidWrite:!1,message:null,limit:null,showLiveErrorAfterFirstSubmit:null,hideErrorTimeout:null,showErrorTimeout:null},s=Array.isArray(e)?function(r){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.reduce((function(r,e){return t&&isNaN(+e)?+r:+r+ +e}),0)}(e):null,f=!isNaN(s),h=!0;if(o&&M(e)&&Z(o)){var p=o.shouldLockSubmitBtnWhenControlInvalid;z(c,K(K({},o),{},{hasError:h,hasErrorLockingSubmitBtn:p}))}if(i&&f&&$(s,i)&&Z(i)){var m=i.shouldLockSubmitBtnWhenControlInvalid;z(c,K(K({},i),{},{hasError:h,hasErrorLockingSubmitBtn:m}))}if(a&&f&&G(s,a)&&Z(a)){var v=a.shouldLockSubmitBtnWhenControlInvalid;z(c,K(K({},a),{},{hasError:h,hasErrorLockingSubmitBtn:v}))}if(u&&F(e,u)&&Z(u)){var y=u.shouldLockSubmitBtnWhenControlInvalid;z(c,K(K({},u),{},{hasError:h,hasErrorLockingSubmitBtn:y}))}if(l&&q(e,l)&&Z(l)){var b=l.shouldLockSubmitBtnWhenControlInvalid;z(c,K(K({},l),{},{hasError:h,hasErrorLockingSubmitBtn:b}))}return{errorData:c}};function X(r,t){var e;return function(){for(var n=this,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var u=function(){r.apply(n,i)};return clearTimeout(e),e=setTimeout(u,t)}}var rr=function(r,t){r((function(r){var e=t.controlName;r.controls[e].hasError=!1}))};function tr(r,t){if(r=+r,2===t.length&&t.push(t[1]),isNaN(r))throw new Error("type of quantity expect only number");return t[r%100>4&&r%100<20?2:[2,0,1,1,1,2][r%10<5?r%10:5]]}var er=function(r,t){var e=t.limit;return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,e=!("string"==typeof r||"number"==typeof r||null===r);if(null===r)return"";if(e)throw new Error("message for replace has invalid type");var n=r;return n&&t.forEach((function(t){var e=t.searchLayout,o=t.valueToReplace,i=t.shouldClearSearchLayoutIfReplaceValueIsArray,a=void 0===i||i;if(null===o)return"";var u=new RegExp("".concat(e,"['[a-zA-Zа-яА-я]+', '[a-zA-Zа-яА-я]+'(, '[a-zA-Zа-яА-я]+')?]"),"g");if(u.test(n))n=n.replace(u,(function(r){var t=r.replace(new RegExp(e),"").replace(/[\[\]'"]/g,"").split(", "),n=isNaN(+o)?null:tr(+o,t);return isNaN(+o)?o.toString():"".concat(o," ").concat(n)}));else{var l=a?"":o.toString(),c=Array.isArray(o)?l:String(o),s=""===c&&new RegExp(e+" ","g").test(r)?e+" ":e;n=n.replace(new RegExp(s,"g"),c)}})),n}(r,[{searchLayout:"{limit}",valueToReplace:e},{searchLayout:"limitForDecline",valueToReplace:e},{searchLayout:"{label}",valueToReplace:t.controlLabel},{searchLayout:"{writeValue}",valueToReplace:t.writeToControlValue}])},nr=function(r,t,e,n){var o=t.controlName,i=t.newValue,a=e.controls[o],u=a.label,l=r||{},c=l.message,s=void 0===c?null:c,f=l.limit,h=void 0===f?null:f,p=l.hideErrorTimeout,m=void 0===p?null:p,v=a.beforeLiveValidatorError||e.formSettings.beforeLiveValidatorError||null,y=a.afterLiveValidatorError||e.formSettings.afterLiveValidatorError||null;if("function"==typeof v&&v(t),r&&(a.error=er(s,{limit:h,controlLabel:u,writeToControlValue:i})),a.hasError=!0,m){var b=function(r,t,e){return X(rr,e)(t,r)}(t,n,m);a._hideErrorTimeoutId=b}"function"==typeof y&&y(t)};function or(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function ir(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?or(Object(e),!0).forEach((function(t){i(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):or(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var ar=function(r,t,e,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=Boolean(i),u=a?function(){return n((function(e){var o=ir({},e);return nr(r,t,o,n),o}))}:function(){return nr(r,t,e,n)},l=X(u,i),c=r.hasError,s=null;return a?c?(o&&clearTimeout(o),s=l()):o&&clearTimeout(o):c&&u(),s};function ur(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}var lr=function(r,t,n){var o=(0,r.liveSearch.request)(t),a=o.url,u=o.method,l=void 0===u?"get":u,c=o.data,s=void 0===c?{}:c;a&&(r.liveSearch.isLoading=!0,e({method:l,url:a,data:s}).then((function(r){var e=t.controlName;n((function(n){var o=function(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(e),!0).forEach((function(t){i(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ur(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}({},n),a=o.controls[e];a.liveSearch.isLoading=!1;var u=a.liveSearch.response(t,r);return a.liveSearch.foundedData=u||r,o}))})))};function cr(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}var sr=function(r,t,e){var n=r.liveSearch,o=r._liveSearchRequestTimeoutId,a=n.debounceTime,u=void 0===a?0:a,l=u?function(){return e((function(n){var o=function(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(e),!0).forEach((function(t){i(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):cr(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}({},n);return lr(r,t,e),o}))}:function(){lr(r,t,e)};u?(o&&clearTimeout(o),r._liveSearchRequestTimeoutId=X(l,u)()):l()},fr=function(r,t,e,n,o){var i=r.type,a=r._hideErrorTimeoutId,u=void 0===a?null:a,l=r._showErrorTimeoutId,c=r.liveSearch,s=["phone","number","text","password","date"].includes(i)?H:Q,f=r.customLiveValidator||s;r.additionalLiveValidator;var h=e.newValue,p=t.formState.isFormTriedSubmit,m={writeToControlValue:h,errorDataForControl:null,hasAnyError:!1,isWriteInputEnable:!0,hasAnyLockingSubmitBtnError:!1};"function"==typeof f&&function(r,t,e){var n=r(t),o=n.errorData,i=void 0===o?null:o,a=n.modifiedValueToWrite,u=void 0===a?null:a,l=i||{},c=l.shouldLockNotValidWrite,s=void 0!==c&&c,f=l.hasError,h=void 0!==f&&f,p=l.hasErrorLockingSubmitBtn,m=void 0!==p&&p;s&&(e.isWriteInputEnable=!1),h&&(e.hasAnyError=!0),m&&(e.hasAnyLockingSubmitBtnError=!0),u&&(e.writeToControlValue=u),i&&(e.errorDataForControl=i)}(f,e,m);var v=m.errorDataForControl,y=m.hasAnyError,b=m.hasAnyLockingSubmitBtnError,d=m.writeToControlValue,g=m.isWriteInputEnable,w=v||{},O=w.showLiveErrorAfterFirstSubmit,E=void 0!==O&&O,j=w.showErrorTimeout,S=void 0===j?0:j,L=!E;g&&(r.value=d,c&&sr(r,e,o)),y||(r.hasError=!1,u&&r._hideErrorTimeoutId&&clearTimeout(r._hideErrorTimeoutId)),r.hasErrorLockingSubmitBtn=b,(E&&p||L)&&(r._showErrorTimeoutId=ar(v,e,t,o,l,S))};function hr(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function pr(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?hr(Object(e),!0).forEach((function(t){i(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):hr(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var mr=function(r,t,e){var n=arguments.length>4?arguments[4]:void 0;e((function(o){var i=pr({},o),a=i.controls[t],u={currentControl:a,controlName:t,newValue:r,form:i,selectedValue:n},l=a.beforeChange||null,c=a.afterChange||null;"function"==typeof l&&l(u),fr(a,i,u,0,e),"function"==typeof c&&c(u);var s=!1,f=i.controls;return Object.keys(f).forEach((function(r){f[r].hasErrorLockingSubmitBtn&&(s=!0)})),i.formState.isSubmitBtnLocked=s,i}))};function vr(r){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function yr(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function br(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(e),!0).forEach((function(t){i(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):yr(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var dr=function(r,t,e){var n,o,i,a=r.currentControl,u=r.controlName,l=a.type,c=void 0===l?null:l;if(a.value,c){!function(r){var t=r.currentControl,e=r.controlName,n=r.formName;t.type,t.error="",t.hasError=!1,t.hasErrorLockingSubmitBtn=!1,t.controlName=e,t.inputName="".concat(n,"[").concat(e,"]"),t.value||(t.value="")}(r),n=a,o=t.formSettings.formValidatorsRules,i=n.validateRules||{},Object.keys(o).forEach((function(r){var t=i[r],e=o[r],n="boolean"==typeof t;"object"===vr(t)?i[r]=br(br({},e),t):n&&(i[r]=br({},e))})),a.setValue=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return mr(r,u,e,t,n)};var s=function(r,t){var e=r.currentControl,n=r.controlName,o=e.type,i=["phone","number","text","password","date"].includes(o)?H:Q;return(e.customLiveValidator||i)({form:t,currentControl:e,controlName:n,newValue:e.value}).errorData.hasErrorLockingSubmitBtn}(r,t);console.log(s,u),a.hasErrorLockingSubmitBtn=s,!1===t.formState.isSubmitBtnLocked&&s&&(t.formState.isSubmitBtnLocked=!0)}else console.error("type is require control prop");return!0},gr=function(r,t,e){!function(r,t,e){var n=r.controls,o=!0;Object.keys(n).forEach((function(i){var a,u={currentControl:n[i],controlName:i,formName:(null===(a=r.formSettings)||void 0===a?void 0:a.formName)||""};!0!==t(u,r,e)&&(o=!1)}))}(r,dr,e)};function wr(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function Or(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(e),!0).forEach((function(t){i(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):wr(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var Er=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={loaded:!1,isSubmitBtnLocked:!1,isFormTriedSubmit:!1},a=_(B.formValidatorsRules,n.formValidatorsRules),l=r({controls:e,formState:i,formSettings:Or(Or(Or({},B),{},{formName:"form"},n),{},{formValidatorsRules:a})}),c=u(l,2),s=c[0],f=c[1];return t((function(){var r;(r=o(V.mark((function r(){return V.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:f((function(r){var t=Or({},r);return gr(t,0,f),t}));case 1:case"end":return r.stop()}}),r)}))),function(){return r.apply(this,arguments)})()}),[]),[s,f]};export{Er as useFlakyForm};
